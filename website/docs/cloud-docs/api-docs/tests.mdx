---
page_title: Runs - API Docs - Terraform Cloud
description: >-
  Use the `/runs` endpoint to manage Terraform runs. List, get, create, apply, discard, execute, and cancel runs using the HTTP API.
---

[200]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200

[201]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/201

[202]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/202

[204]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/204

[400]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

[401]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

[403]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

[404]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404

[409]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409

[412]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/412

[422]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

[429]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429

[500]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500

[504]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504

[JSON API document]: /terraform/cloud-docs/api-docs#json-api-documents

[JSON API error object]: https://jsonapi.org/format/#error-objects

# Tests API

-> **Note:** Before working with the tests or configuration versions APIs, read the [API-driven run workflow](/terraform/cloud-docs/test/api) page, which includes both a full overview of this workflow and a walkthrough of a simple implementation of it.

Performing a run on a new configuration is a multi-step process.

1. [Create a configuration version on the registry module](/terraform/cloud-docs/api-docs/configuration-versions#create-a-configuration-version).
1. [Upload configuration files to the configuration version](/terraform/cloud-docs/api-docs/configuration-versions#upload-configuration-files).
1. [Create a run on the workspace](#create-a-run); this is done automatically when a configuration file is uploaded.
1. [Create and queue an apply on the run](#apply-a-run); if the run can't be auto-applied.

Alternatively, you can create a test with a pre-existing configuration version, even one from another module. This is useful for promoting known good code from one module to another.

## Attributes

### TestRun States

The state of the test operation is found in `data.attributes.status`, and you can reference the following list of possible states.
| State                  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `pending`              | The initial status of a run after creation.                                                                                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                           |
| `queued`              | Terraform Cloud has queued the test operation to start.                                                                                                                                                                                                                                                                                                                                                                                        |
| `running`          | Terraform Cloud is executing the test.
| `errored`              | The test has errored. This is a final state.                                                                                                                                                                                                                                                                                                                                                                                                 |
| `canceled`             | The test has been canceled. This is a final state.                                                                                                                                                                                                                                                                                                                                                                                                         |
| `finished`       | The test has completed. This is a final state.

### TestRun Status

The final test status is found in `data.attributes.test-status`, and you can reference the following list of possible states.
| Status                  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `pass`              | The given tests have passed.                                                                                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                           |
| `fail`              | The given tests have failed.

                                                                                                                                                                                                                                                                                                                                                                                      |
### TestRun Status

The test results can be found via the following attributes
| Status                  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `data.attributes.tests-passed`              | The number of tests that have passed.                                                                                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                           |
| `data.attributes.tests-failed`              | The number of tests that have failed.
| `data.attributes.tests-errored`              | The number of tests that have errored out.
| `data.attributes.tests-skipped`              | The number of tests that have been skipped.


## Create a Test Run
`POST /organizations/:organization_name/tests/registry-modules/:registry_name/:namespace/:name/:provider/test-runs`

A test run executes tests against a registry module, using a configuration version and the modules’s current environment variables. You can specify a configuration version when creating a testrun; if you don’t provide one, the testrun defaults to the modules most recently used version.

Creating a test run requires permission to access the specified module. ([More about permissions.](/terraform/cloud-docs/users-teams-organizations/permissions))

When creating a testrun, you may optionally provide a list of variable objects containing key and value attributes. These values apply to that testrun specifically and take precedence over variables with the same key that are created within the module. All values must be expressed as an HCL literal in the same syntax you would use when writing Terraform code. Refer to [Types](/terraform/language/expressions/types#types) in the Terraform documentation for more details.

**Sample Run Variables:**

```json
"attributes": {
  "variables": [
    { "key": "replicas", "value": "2" },
    { "key": "access_key", "value": "\"ABCDE12345\"" }
  ]
}
```

### Request Body

This POST endpoint requires a JSON object with the following properties as a request payload.

Properties without a default value are required.

| Key path                                           | Type                 | Default                                            | Description                                                                                                                                                                                                                                   |
|----------------------------------------------------|----------------------|----------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `data.attributes.verbose`                | bool                 | false                                                   | Specifies whether Terraform should print the plan or state for each test run block as it executes.                                                                    |
| `data.attributes.test-directory`                | string                 | "tests"                                              | Sets the directory where tests will be executed.                                                               |
| `data.attributes.filters`                    | array\[string]       |                                                    | If specified, Terraform will only execute the test files contained within this array.                                                                                                                                                        |
| `data.attributes.variables`                        | array\[{key, value}] | (empty array)                                      | Specifies an optional list of run-specific variable values. Refer to [Run-Specific Variables](/terraform/cloud-docs/workspaces/variables/managing-variables#run-specific-variables) for details.    |
| `data.attributes.plan-only`                        | bool                 | (from configuration version)                       | Specifies if this is a [speculative, plan-only](/terraform/cloud-docs/run/modes-and-options#plan-only-speculative-plan) run that Terraform cannot apply. Often used in conjunction with terraform-version in order to test whether an upgrade would succeed. |
| `data.attributes.save-plan`                        | bool                 | false                                              | Specifies if this should be a saved plan run. Terraform can apply saved plan runs, but they perform their plan and checks without becoming the workspace's current run (like a plan-only run), and will only become the current run if you confirm them for apply. When creating new [configuration versions](/terraform/cloud-docs/api-docs/configuration-versions) for saved plan runs, be sure to make them `provisional`. |
| `data.attributes.terraform-version`                | string               |                                                    | Specifies the Terraform version to use in this run. Only valid for plan-only runs; must be a valid Terraform version available to the organization.                                                                                           |
| `data.relationships.workspace.data.id`             | string               |                                                    | Specifies the workspace ID where the run will be executed.                                                                                                                                                                                    |
| `data.relationships.configuration-version.data.id` | string               |                                                    | Specifies the configuration version to use for this run. If the `configuration-version` object is omitted, the run will be created using the workspace's latest configuration version.                                                        |

| Status  | Response                               | Reason                                                                      |
|---------|----------------------------------------|-----------------------------------------------------------------------------|
| [201][] | [JSON API document][] (`type: "runs"`) | Successfully created a run                                                  |
| [404][] | [JSON API error object][]              | Organization or workspace not found, or user unauthorized to perform action |
| [422][] | [JSON API error object][]              | Malformed request body (missing attributes, wrong types, etc.)              |
